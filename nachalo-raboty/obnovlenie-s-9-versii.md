# Обновление с 9 версии

Мы постараемся задокументировать все изменения чтобы вам было легче обновить ваши модули под новую версию JohnCMS

### Изменена стандартная структура модуля

Теперь классы модуля должны располагаться в папке src, которая располагается в папке с модулем.\
Маршруты для работы модуля теперь описываются в папке модуля, а не в общем конфигурационном файле. Файлы конфигурации так же расположены теперь в папке с модулем. Подробнее можете ознакомиться в инструкции по созданию модуля.

### Удалено пространство имен Johncms\System

Все классы, которые располагались в пространств Johncms\System были перенесены в пространство имен Johncms.\
Например:

{% tabs %}
{% tab title="Было" %}
```php
$request = di(\Johncms\System\Http\Request::class);
```
{% endtab %}

{% tab title="Стало" %}
```php
$request = di(\Johncms\Http\Request::class);
```
{% endtab %}
{% endtabs %}

### Все POST запросы должны содержать CSRF-токен

Все POST запросы, проходящие через роутер, теперь по умолчанию проверяются на наличие корректного CSRF токена. Если токена нет, вы будете получать ошибку 419.\
Токен должен содержаться в поле с именем **`csrf_token`** или же в заголовке **`X-CSRF-Token`**.\
Если вы хотите отключить проверку для определенных адресов, то можете добавить исключение в конфигурационном файле. Пример файла **config/autoload/csrf.global.php** для правильной кастомизации ознакомьтесь с [инструкцией по работе с конфигурационными файлами](../obshie-svedeniya/konfiguracionnye-faily-configs.md).\
